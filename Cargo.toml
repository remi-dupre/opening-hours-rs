[package]
name = "opening-hours"
version = "2.0.0"
authors = ["Rémi Dupré <remi@dupre.io>"]
license = "MIT OR Apache-2.0"
readme = "README.md"
repository = "https://github.com/remi-dupre/opening-hours-rs"
documentation = "https://docs.rs/opening-hours"
homepage = "https://github.com/remi-dupre/opening-hours-rs"
description = "A parser and evaluation tool for the opening_hours fields in OpenStreetMap."
edition = "2021"
exclude = ["dist/"]  # generated by maturin
build = "opening-hours/build.rs"

[package.metadata.docs.rs]
all-features = true  # include all features in documentation for docs.rs

[workspace]
members = ["compact-calendar", "opening-hours-syntax", "opening-hours-py", "fuzz"]

[lib]
path = "opening-hours/src/lib.rs"

[features]
default = ["log"]
auto-country = ["dep:country-boundaries"]
auto-timezone = ["dep:chrono-tz", "dep:tzf-rs"]
log = ["opening-hours-syntax/log", "dep:log"]

[dependencies]
chrono = "0.4"
compact-calendar = { path = "compact-calendar", version = "2.0.0" }
flate2 = "1.0"
opening-hours-syntax = { path = "opening-hours-syntax", version = "2.0.0" }
sunrise = "1.2.1"

# Feature: log (default)
log = { version = "0.4", features = [ "kv" ], optional = true }

# Feature: auto-country
country-boundaries = { version = "1.2", optional = true }

# Feature: auto-timezone
chrono-tz = { version = "0.10", optional = true }
tzf-rs = { version = "0.4", default-features = false, optional = true }

[build-dependencies]
chrono = "0.4"
compact-calendar = { path = "compact-calendar", version = "2.0.0" }
country-boundaries = { version = "1.2", optional = true }
flate2 = "1.0"
rustc_version = "0.4.0"

[dev-dependencies]
chrono-tz = "0.10"
criterion = "0.5"

[[bin]]
name = "schedule"
path = "opening-hours/src/bin/schedule.rs"

[[bench]]
name = "benchmarks"
harness = false
path = "opening-hours/benches/benchmarks.rs"

[profile.dev.package.flate2]
opt-level = 3  # build script will run substantially faster for dev

[profile.bench]
codegen-units = 1
lto = "fat"
